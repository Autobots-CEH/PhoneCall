# PhoneCall
#### 项目介绍 

基于netty框架实现的局域网内的ip电话，netty是一个socket框架。通过输入对方ip或者点击从服务器上获取到的ip地址进行语音通话，双方通过交换控制信令实现语音通话的控制，共有四个界面的切换，打电话界面，响铃界面，通话界面，主界面。本来打算做个群组通话，但是只做到了两个录音音频合成的操作，还没有实现群组的数据发送，并没有实现群组通话的功能。  

#### 项目实现思路

利用安卓里面的AudioRecord录音类进行录音，然后运用speex第三方库进行降噪编码，将编码后的语音流通过socket发送给对方， 对方在收到语音数据时候将进行解码操作，之后使用AudioTrack进行语音的播放。  

对于群组通话，比如说有ABC三人进行通话，通过A开启一个聊天室，然后BC加入聊天室，此时BC只需将自己的语音流发送给A，然后在A进行语音的合成操作，将合成的语音在本地播放和发送给BC即可，但是具体的网络连接并没有实现。

#### 项目架构

- audio包：进行音频的录制、编码、解码、播放操作 
- net包：网络连接的包 
  - CallSingal:定义电话信令，如拨打电话操作 
  - Message: 传输数据，包括字节与音流和文字 
  - NettyClient: netty网络连接代理 
  - NettyReceiverHandler: 处理发送数据和接受数据，定义接口回调返回语音信息和电话信令信息
- provider包: 网络连接提供者，通过这个对象可以实现网络数据的发送与接收，需要定义接口进行接受与音数据
- users包：获取服务器上在线用户ip的用户对象
- mixAudioUtils: 混音用的工具类
- MultiVoIPActivity:实现混音界面，需要录制两端音频然后点击混音按钮，之后点击输出混音即可播放
- VoipP2PActivity:ip电话的主要界面，因为需要监听打电话的请求，但是不会写service进行后台监听，所以就在一个activity中写了五个界面进行切换..以后有机会可能会改
